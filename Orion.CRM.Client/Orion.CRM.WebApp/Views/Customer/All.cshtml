
@{
    ViewData["Title"] = "Search";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section styles{
    <link href="~/assets/pikaday/pikaday.css" rel="stylesheet" />
    <style type="text/css">
        input[type="radio"], input[type="checkbox"] {
            margin: 0 0 0;
            line-height: normal;
        }

        .search-input {
            border: 1px solid gray;
            border-radius: 1px !important;
            padding: 3px 3px;
            height: 18px !important;
            width: 91px;
            font-size: 12px !important;
        }

        .search-select {
            width: 105px;
            height: 28px !important;
            border-radius: 1px !important;
            padding: 0px 3px
        }
    </style>
}


<div class="panel panel-default span12">
    <div class="panel-heading">
        <h3 class="panel-title">所有客户</h3>
    </div>

    <div class="panel-body">
        <!--查询-->
        <form action="/Customer/All" method="get">
            <input type="hidden" id="hidGroupId" />

            <div style="background-color:#f5f5f5;padding:10px">
                <div style="background-color:#fff;padding:5px">
                    <div class="form-inline" style="margin-top:10px">
                        <span>项目</span>
                        <select class="search-select"><option>请选择</option></select>

                        <span style="margin-left:10px">品牌</span>
                        <select class="search-select"><option>请选择</option></select>
                        <span style="margin-left:10px">区域</span>
                        <select class="search-select"><option>请选择</option></select>
                    </div>
                    <div class="form-inline" style="margin-top:10px">
                        <span>姓名</span>
                        <input type="text" class="search-input" placeholder="客户姓名" />
                        <span style="margin-left:10px">手机</span>
                        <input type="text" class="search-input" placeholder="手机号码" />
                        <span style="margin-left:10px">添加时间</span>
                        <input type="text" class="search-input" placeholder="起始" />-<input type="text" class="search-input" placeholder="结束" />

                        <button type="submit" class="btn btn-primary" style="margin-left:70px">
                            查询
                        </button>
                    </div>
                    <div class="form-inline" style="margin-top:10px">
                        <a href="/Customer/Add" class="btn btn-default">
                            新 建 <i class="icon-plus"></i>
                        </a>
                    </div>
                </div>
            </div>
        </form>
        <!--数据列表-->
        <div style="background-color:#f5f5f5;padding:10px;">
            <div style="background-color:#fff;padding:5px">
                <table class="table table-bordered table-data">
                    <thead>
                        <tr>
                            <th style="width:20px">
                                <input type="checkbox" id="ckAll" onclick="checkToggle()" />
                            </th>
                            <th>客户姓名</th>
                            <th>联系方式</th>
                            <th>签约时间</th>
                            <th>项目</th>
                            <th>品牌</th>
                            <th>代理级别</th>
                            <th>代理区域</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="checkbox" name="ckResource" value="" /></td>
                            <td><a href="">客户1</a></td>
                            <td>132xxxx4567</td>
                            <td>2018-12-22</td>
                            <td>欣欣学堂</td>
                            <td>品牌1</td>
                            <td>省级代理</td>
                            <td>河南省</td>
                            <td><a href="javascript:;" onclick="showAssignPanel(1)">分配售后</a> | <a href="/Customer/Detail">详情</a></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" name="ckResource" value="" /></td>
                            <td>客户2</td>
                            <td>183xxxx4567</td>
                            <td>2018-12-22</td>
                            <td>欣欣学堂</td>
                            <td>品牌1</td>
                            <td>市级代理</td>
                            <td>北京市</td>
                            <td><a href="javascript:;">分配售后</a> | <a href="/Customer/Detail">详情</a></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" name="ckResource" value="" /></td>
                            <td>客户3</td>
                            <td>136xxxx4567</td>
                            <td>2018-12-22</td>
                            <td>欣欣学堂</td>
                            <td>品牌1</td>
                            <td>县级代理</td>
                            <td>密云县</td>
                            <td><a href="javascript:;">分配售后</a> | <a href="/Customer/Detail">详情</a></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" name="ckResource" value="" /></td>
                            <td>客户4</td>
                            <td>135xxxx4567</td>
                            <td>2018-12-22</td>
                            <td>开课吧</td>
                            <td>品牌12</td>
                            <td>地区代理</td>
                            <td>淮北地区</td>
                            <td><a href="javascript:;">分配售后</a> | <a href="/Customer/Detail">详情</a></td>
                        </tr>
                    </tbody>
                </table>
                <html-pager pager-option="ViewBag.PagerOption as PagerOption"></html-pager>
            </div>
        </div>
    </div>
</div>


<!--分配售后-->
<div class="modal modal-webpi" id="panelAssign" style="width:500px;display:none" param-id="">
    <a href="javascript:;" class="modal-close" data-s-object-id="webpi(close)" onclick="closeModal(this)">✖</a>
    <div class="modal-contents">
        <h2>分配售后</h2>
        <div style="border:1px solid #e1e2e2;padding:15px;">
            <div>
                <input type="hidden" id="assignResourceId" />
                <table>
                    <tr>
                        <td style="width:140px">请选择售后服务专员：</td>
                        <td>
                            <select class="panel-select" id="assignSelectGroup" onchange="assignGroupChange()">
                                <option value="">请选择</option>
                                <option>售后专员1</option>
                                <option>售后专员2</option>
                            </select>
                        </td>
                    </tr>
                </table>
                <div id="assignTips" style="padding:3px;color:red;display:none">请选择你要分配的业务人员。</div>
                <div style="margin-top:20px">
                    <input type="button" value="确定" class="btn btn-inverse" onclick="resourceAssign()" />
                    <input type="button" value="取消" class="btn btn-default" onclick="closeModal(this)" />
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts{ 
    <script type="text/javascript">
        // 弹出资源分配模态窗体
        function showAssignPanel(customerId) {
            //$('#assignResourceId').val(resourceId);
            //$("#assignSelectGroup option").not(":first").remove();
            //$('#assignSelectSaler option').not(":first").remove();

            //$.get("/Group/GetGroupsByProjectId", { "projectId": projectId }, function (groups) {
            //    if (groups && groups.length > 0) {
            //        $('#assignTips').hide();
            //        for (var i = 0; i < groups.length; i++) {
            //            var option = '<option value="' + groups[i].id + '">' + groups[i].groupName + '</option>';
            //            $('#assignSelectGroup').append(option);
            //        }
            //    }
            //    else {
            //        $('#assignTips').html('该项目没有业务组，请先创建业务组！');
            //        $('#assignTips').show();
            //    }
            //});
            modalShow($('#panelAssign'));
        }
    </script>
}
