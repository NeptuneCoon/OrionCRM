
@{
    ViewData["Title"] = "Overview";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section styles{
    <link href="~/assets/morris.chart/0.5.1/morris.css" rel="stylesheet" />
}
@section scripts{
    <script src="~/assets/morris.chart/0.5.1/raphael-min.js"></script>
    <script src="~/assets/morris.chart/0.5.1/morris.min.js"></script>

    <script type="text/javascript">
    /*
    图表的初始化
    */
        $(function () {
        /*
        var jsonString = $('#hidSourceStat').val();
        var data = [];
        if (jsonString) {
            var jsonArr = JSON.parse(jsonString);
            for (var i = 0; i < jsonArr.length; i++) {
                var item = jsonArr[i];
                data.push({ label: item.SourceName, value: item.ResourceCount });
            }
            console.info(data);
        }
        */
        // 环形图
        Morris.Donut({
            element: 'month',
            data: [
                { label: '315', value: 25 },
                { label: 'Frosted', value: 40 },
                { label: 'Custard', value: 25 },
                { label: 'Sugar', value: 10 }
            ],
            formatter: function (y) { return y + "条" }
        });

        // 柱状图
        Morris.Bar({
            element: 'year',
            data: [
                { device: 'iPhone', geekbench: 136 },
                { device: 'iPhone 3G', geekbench: 137 },
                { device: 'iPhone 3GS', geekbench: 275 },
                { device: 'iPhone 4', geekbench: 380 },
                { device: 'iPhone 4S', geekbench: 655 },
                { device: 'iPhone 5', geekbench: 1571 }
            ],
            xkey: 'device',
            ykeys: ['geekbench'],
            labels: ['总数'],
            barRatio: 0.4,
            xLabelAngle: 35,
            hideHover: 'auto'
        });
    });
    </script>
}
<h3>业绩概览</h3>
<input type="hidden" id="hidSourceStat" value="@ViewBag.SourceStat" />

<!--当月业绩，环形图-->
<div class="row">
    <div class="span7">
        <div class="graph-container">
            <span class="graph-mark">月度</span>
            <div class="caption">当月业绩</div>
            <div id="month" class="graph" style="position:relative;"></div>
        </div>
    </div>
</div>


<!--本年业绩，柱状图-->
<div class="row">
    <div class="span7">
        <div class="graph-container">
            <span class="graph-mark">本年</span>
            <div class="caption">本年业绩(2017-1-1至今)</div>
            <div id="year" class="graph" style="position:relative;"></div>
        </div>
    </div>
</div>

<!--最佳业务排行-->
<div class="row">
    <div class="span7">
        <div class="graph-container">
            <span class="graph-mark">业务排行</span>
            <div class="caption">最具潜力业务排行</div>
            <div id="saler" class="graph" style="position:relative;"></div>
        </div>
    </div>
</div>
